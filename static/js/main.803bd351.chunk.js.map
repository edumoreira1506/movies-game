{"version":3,"sources":["services/api.js","services/GameService.js","services/RankingService.js","models/Quizzes.js","contexts/quizzes.js","components/Question/index.js","components/Questions/index.js","components/Loading/index.js","models/Ranking.js","components/Ranking/index.js","pages/Main/index.js","App.js","index.js"],"names":["require","config","api","axios","create","baseURL","process","headers","setup","a","get","data","store","rankingUser","post","show","quizzTemplate","sentence","options","answers","map","item","answerTemplate","answer","correct","checked","disabled","callback","GameService","quizzes","quizzesWithTemplate","getPoints","reduce","points","quizz","find","Boolean","getCorrectAnswer","getPointsRanking","rightAnswers","amountOfQuizzes","QuizzesContext","createContext","QuizzesProvider","children","useState","setQuizzes","started","setStarted","loading","setLoading","showRanking","setShowRanking","handleStartGame","Quizzes","quizzesApi","handleChangeCheck","quizzIndex","newQuizzes","index","newOptions","handleFinishGame","name","window","prompt","itemOption","pointsRanking","length","RankingService","alert","toggleRanking","Provider","value","answerClass","finished","Question","className","FormControl","component","RadioGroup","option","key","FormControlLabel","label","control","Radio","onChange","Questions","Box","display","alignItems","justifyContent","width","height","flexDirection","marginTop","marginBottom","Button","variant","onClick","color","Loading","getRanking","ranking","rankingWithTemplate","rankingTemplate","id","created_at","createdAt","Date","Ranking","onClose","users","setUsers","useEffect","user","getDay","getMonth","getFullYear","Main","useContext","margin","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.803bd351.chunk.js","sourcesContent":["import axios from 'axios';\n\nrequire('dotenv').config();\n\nconst apiUrl = process.env.REACT_APP_URL_API;\n\nconst api = axios.create({\n  baseURL: apiUrl,\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json',\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'GET,PUT,POST,DELETE,PATCH,OPTIONS'\n  }\n});\n\nexport default api;\n","import api from './api';\n\nexport const setup = async () => {\n  const { data } = await api.get('setup');\n\n  return data;\n}\n","import api from './api';\n\nexport const store = async (rankingUser) => {\n  const { data } = await api.post('ranking', rankingUser);\n\n  return data;\n}\n\nexport const show = async () => {\n  const { data } = await api.get('ranking');\n\n  return data;\n}\n","import * as GameService from '../services/GameService';\nimport * as RankingService from '../services/RankingService';\n\nconst quizzTemplate = ({\n  sentence,\n  answers\n}) => ({\n  sentence,\n  options: answers.map(item => answerTemplate(item.answer, item.correct))\n});\n\nconst answerTemplate = (answer, correct, checked = false, disabled = false) => ({\n  answer, correct, checked, disabled\n});\n\nexport const setup = async (callback) => {\n  const { quizzes } = await GameService.setup();\n  const quizzesWithTemplate = quizzes.map(quizzTemplate);\n\n  return callback(quizzesWithTemplate);\n};\n\nexport const updateOption = (quizzes, quizzIndex, answer) => {\n  const newQuizzes = quizzes.map((item, index) => {\n    if (index === quizzIndex) {\n      const newOptions = item.options.map(item => \n        item.answer === answer ? { ...item, checked: true } : { ...item, checked: false }\n      );\n\n      return { ...item, options: newOptions };\n    }\n\n    return { ...item }\n  });\n\n  return newQuizzes;\n}\n\nconst getCorrectAnswer = quizz => quizz.options.find(item => Boolean(item.correct));\n\nconst getPoints = quizzes => quizzes.reduce((points, quizz) => {\n  const correctAnswer = getCorrectAnswer(quizz);\n\n  if (correctAnswer.checked) {\n    return points + 1;\n  }\n\n  return points;\n}, 0)\n\nexport const finishGame = (quizzes, name) => {\n  const newQuizzes = quizzes.map(item => ({\n    ...item,\n    options: item.options.map(itemOption => ({\n      ...itemOption,\n      disabled: true\n    }))\n  }));\n  const points = getPoints(quizzes);\n  const pointsRanking = getPointsRanking(points, quizzes.length);\n  const rankingUser = { points: pointsRanking, name };\n\n  RankingService.store(rankingUser);\n\n  return { quizzes: newQuizzes, points };\n}\n\nconst getPointsRanking = (rightAnswers, amountOfQuizzes) =>\n  100 * rightAnswers / amountOfQuizzes;\n\n","import React, { createContext, useState } from 'react';\nimport * as Quizzes from '../models/Quizzes';\n\nexport const QuizzesContext = createContext();\n\nexport const QuizzesProvider = ({ children }) => {\n  const [ quizzes, setQuizzes ] = useState([]);\n  const [ started, setStarted ] = useState(false);\n  const [ loading, setLoading ] = useState(false);\n  const [ showRanking, setShowRanking ] = useState(false);\n\n  const toggleRanking = () => setShowRanking(!showRanking);\n\n  const handleStartGame = () => {\n    setLoading(true);\n\n    const setupCallback = quizzesApi => {\n      setQuizzes(quizzesApi);\n      setStarted(true);\n      setLoading(false);\n    }\n\n    setQuizzes(Quizzes.setup(setupCallback));\n  }\n\n  const handleChangeCheck = (quizzIndex, answer) => {\n    const newQuizzes = Quizzes.updateOption(quizzes, quizzIndex, answer);\n\n    setQuizzes(newQuizzes);\n  }\n\n  const handleFinishGame = () => {\n    const name = window.prompt('Digite seu nome para registrarmos no ranking.');\n    const { quizzes: newQuizzes, points } = Quizzes.finishGame(quizzes, name);\n\n    alert(`Você acertou ${points} de ${newQuizzes.length} perguntas.`);\n\n    setStarted(false);\n    setQuizzes(newQuizzes);\n  }\n\n  const store = {\n    quizzes, started,\n    handleStartGame, handleChangeCheck,\n    handleFinishGame, loading, toggleRanking,\n    showRanking\n  };\n\n  return (\n    <QuizzesContext.Provider value={store}>\n      { children }\n    </QuizzesContext.Provider>\n  )\n}\n","import React from 'react';\nimport { FormControl, RadioGroup, FormControlLabel, Radio } from '@material-ui/core';\n\nimport './index.scss';\n\nconst answerClass = (finished, correct) => \n  `\n    Question__answer\n    ${ finished && correct ? 'Question__answer--correct': '' }\n  `;\n\nconst Question = ({\n  sentence,\n  options,\n  handleChangeCheck,\n  finished\n}) => (\n  <div className=\"Question\">\n    <h2 className=\"Question__title\">\n      { sentence }\n    </h2>\n    <FormControl component=\"fieldset\">\n      <RadioGroup>\n        {\n          options.map((option, index) => (\n            <div\n              className={answerClass(finished, option.correct)}\n              key={`${option.answer}-${index}`}\n            >\n              <FormControlLabel\n                value={option.answer}\n                label={option.answer}\n                control={<Radio />}\n                checked={option.checked}\n                onChange={() => handleChangeCheck(option.answer)}\n                disabled={option.disabled}\n              />\n            </div>\n          ))\n        }\n      </RadioGroup>\n    </FormControl>\n  </div>\n);\n\nexport default Question;\n","import React from 'react';\nimport Question from '../Question';\nimport { Button, Box } from '@material-ui/core';\n\nconst Questions = ({\n  quizzes,\n  handleChangeCheck,\n  handleFinishGame,\n  started\n}) => (\n  <div className=\"Questions\">\n    <Box\n      display=\"flex\"\n      alignItems=\"center\"\n      justifyContent=\"center\"\n      width=\"100vw\"\n      height=\"auto\"\n      flexDirection=\"column\"\n    >\n      {\n        quizzes.map((item, index) => (\n          <Question\n            key={`${item.sentence}-${index}`}\n            sentence={item.sentence}\n            options={item.options}\n            handleChangeCheck={answer => handleChangeCheck(index, answer)}\n            finished={!started}\n          />\n        ))\n      }\n      {\n        started && (\n          <Box marginTop=\"30px\" marginBottom=\"30px\">\n            <Button variant=\"contained\" onClick={handleFinishGame} color=\"primary\">\n              Checar respostas\n            </Button>\n          </Box>   \n        )\n      }\n    </Box>\n  </div>  \n);\n\nexport default Questions;\n","import React from 'react';\n\nimport './index.scss';\n\nconst Loading  = () => (\n  <div className=\"Loading\">\n    <span className=\"Loading__spinner\"></span>\n  </div>\n);\n\nexport default Loading;\n","import * as RankingService from '../services/RankingService';\n\nexport const getRanking = async (callback) => {\n  const { ranking } = await RankingService.show();\n  const rankingWithTemplate = ranking.map(rankingTemplate);\n\n  return callback(rankingWithTemplate);\n}\n\nconst rankingTemplate = ({\n  id, points, created_at, name\n}) => ({\n  name, id, points, createdAt: new Date(created_at)\n});\n","import React, { useEffect, useState, Fragment } from 'react';\nimport { getRanking } from '../../models/Ranking';\n\nimport './index.scss';\n\nconst Ranking = ({ onClose }) => {\n  const [ users, setUsers ] = useState([]);\n\n  useEffect(() => {\n    getRanking(setUsers);\n  }, []);\n\n  return (\n    <div className=\"RankingBackground\">\n      <div className=\"Ranking\">\n        <span className=\"Ranking__close-button\" onClick={onClose}>X</span>\n        <div className=\"Ranking__header\">\n          <h2 className=\"Ranking__area\">\n            Nome\n          </h2>\n          <h2 className=\"Ranking__area\">\n            Pontuação\n          </h2>\n          <h2 className=\"Ranking__area\">\n            Data\n          </h2>\n        </div>\n        <div className=\"Ranking__body\">\n          {\n            users.map(user => (\n              <Fragment key={user.id}>\n                <h2 className=\"Ranking__area\">\n                  { user.name }\n                </h2>\n                <h2 className=\"Ranking__area\">\n                  { user.points }%\n                </h2>\n                <h2 className=\"Ranking__area\">\n                  { `${user.createdAt.getDay()}/${user.createdAt.getMonth() + 1}/${user.createdAt.getFullYear()}` }\n                </h2>\n              </Fragment>\n            ))\n          }\n        </div>\n      </div>\n    </div>\n  )\n};\n\nexport default Ranking;\n","import React, { useContext } from 'react';\nimport { QuizzesContext } from '../../contexts/quizzes';\nimport { Box, Button } from '@material-ui/core';\nimport Questions from '../../components/Questions';\nimport Loading from '../../components/Loading';\nimport Ranking from '../../components/Ranking';\n\nconst Main = () => {\n  const {\n    started,\n    handleStartGame,\n    quizzes,\n    handleChangeCheck,\n    handleFinishGame,\n    loading,\n    toggleRanking,\n    showRanking\n  } = useContext(QuizzesContext);\n\n  if (loading) return <Loading />\n\n  return (\n    <>\n      <Questions\n        quizzes={quizzes}\n        handleChangeCheck={handleChangeCheck}\n        handleFinishGame={handleFinishGame}\n        started={started}\n      />\n      <Box\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"space-around\"\n        width=\"100vw\"\n        height=\"auto\"\n        margin=\"10px 0\"\n      >\n        <Button\n          variant=\"contained\"\n          onClick={handleStartGame}\n          color=\"primary\"\n          disabled={started}\n        >\n          Começar!\n        </Button>\n        <Button\n          variant=\"contained\"\n          onClick={toggleRanking}\n          color=\"primary\"\n        >\n          Ranking\n        </Button>\n      </Box>\n      {\n        showRanking && (\n          <Ranking onClose={toggleRanking} />\n        )\n      }\n    </>\n  );\n};\n\nexport default Main;\n","import React from 'react';\nimport Main from './pages/Main';\nimport { QuizzesProvider } from './contexts/quizzes';\n\nconst App = () => (\n  <QuizzesProvider>\n    <Main />\n  </QuizzesProvider>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './index.scss';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}